#!/bin/bash

help() {
  echo ""
  echo "Script to perform tds_fdw CI"
  echo ""
  echo "Syntax: "
  echo ""
  echo "${SCRIPT} <ARGUMENTS>"
  echo ""
  echo "Mandatory arguments:"
  echo ""
  echo " --action=<get_info|mod_build|mod_install|pg_stop|pg_start|pg_confdb|mssql_test|pg_test|pg_dropdb>"
  echo " --pgver=<$(echo ${1}|tr ' ' '|')>"
  echo " --distro=<$(echo ${2}|tr ' ' '|')>"
  echo ""
  echo "Depending on the value of --action, the following arguments apply."
  echo ""
  echo "Mandatory for mod_build, mod_install, mssql_test and pg_test:"
  echo ""
  echo " --tdsdir=<FULL PATH WHERE TDS_FDW SOURCES ARE>"
  echo ""
  echo "Mandatory for mssql_test and pg_test:"
  echo ""
  echo " --mssqlhost=<MSSQL HOST>"
  echo " --mssqlport=<MSSQL PORT>"
  echo " --mssqldb=<MSSQL DB>"
  echo " --mssqluser=<MSSQL USER>"
  echo " --mssqlpass=<MSSQL PASSWORD>"
  echo ""
  echo "Mandatory for pg_confdb, pg_test and pg_dropdb:"
  echo ""
  echo " --postgresdb=<POSTGRESQL DB>"
  echo " --postgresuser=<POSTGRESQL USER>"
  echo " --postgrespass=<POSTGRESQL PASSWORD>"
  echo ""
  echo "Optional for pg_start:"
  echo ""
  echo " --max_retries=<NUMBER OF TIMES TO CHECK IF SERVICES IS STARTED>"
  echo " --wait_sec=<NUMBER OF SECONDS BETWEEN RETRIES>"
  echo ""
  echo "Optional for pg_test:"
  echo " --untattended_debug Calls the test script with --unattended_debug more information"
  echo "                     about each test, and print PostgreSQL logs on-screen"
  echo ""
  exit 1
}
